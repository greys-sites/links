{"version":3,"file":"4-5b1fe1d0.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/dash/_page.server.js","../../../.svelte-kit/adapter-node/nodes/4.js"],"sourcesContent":["import { r as redirect, f as fail } from \"../../../chunks/index.js\";\nimport axios from \"axios\";\nimport { A as API } from \"../../../chunks/private.js\";\nasync function load({ cookies }) {\n  var u = cookies.get(\"user\");\n  if (!u)\n    throw redirect(308, \"/login\");\n  var d;\n  try {\n    d = await axios.get(API + \"/links\", {\n      headers: {\n        \"Authorization\": u\n      }\n    });\n    d = d.data;\n  } catch (e) {\n    console.log(e.response ?? e);\n    switch (e.response?.status) {\n      case 401:\n        cookies.delete(\"user\");\n        d = { links: [] };\n        break;\n      default:\n        d = { links: [] };\n        break;\n    }\n  }\n  return { links: d };\n}\nconst actions = {\n  async create({ cookies, request }) {\n    var u = cookies.get(\"user\");\n    var d = await request.formData();\n    var data = {\n      name: d.get(\"name\"),\n      \"url\": d.get(\"url\"),\n      hid: d.get(\"hid\") ?? null\n    };\n    if (!data.name)\n      return fail(400, {\n        success: false,\n        action: \"create\",\n        status: 400,\n        message: \"Link name is required.\"\n      });\n    if (!data.url)\n      return fail(400, {\n        success: false,\n        action: \"create\",\n        status: 400,\n        message: \"Link URL is required.\"\n      });\n    try {\n      var resp = await axios.post(`${API}/links`, data, {\n        headers: {\n          \"Authorization\": u\n        }\n      });\n      resp = resp.data;\n    } catch (e) {\n      console.log(e);\n      return fail(500, {\n        // success: false,\n        action: \"create\",\n        status: e.response?.status ?? 500,\n        message: e.response?.data || \"Internal error\"\n      });\n    }\n    return { success: true, action: \"create\", data: resp };\n  },\n  async del({ cookies, request }) {\n    var u = cookies.get(\"user\");\n    var d = await request.formData();\n    try {\n      var resp = await axios.delete(API + `/links/${d.get(\"hid\")}`, {\n        headers: {\n          \"Authorization\": u\n        }\n      });\n    } catch (e) {\n      console.log(e);\n      return {\n        success: false,\n        action: \"delete\",\n        data: {\n          status: e.response.status,\n          message: e.response.data\n        }\n      };\n    }\n    return { success: true, action: \"delete\", data: d.get(\"hid\") };\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/dash/_page.server.js';\n\nexport const index = 4;\nexport const component = async () => (await import('../entries/pages/dash/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/dash/+page.server.js\";\nexport const imports = [\"_app/immutable/nodes/4.24ddd245.js\",\"_app/immutable/chunks/index.9c9e698c.js\",\"_app/immutable/chunks/toasts.25852f94.js\",\"_app/immutable/chunks/index.a7151f55.js\",\"_app/immutable/chunks/forms.58d63d22.js\",\"_app/immutable/chunks/parse.d12b0d5b.js\",\"_app/immutable/chunks/singletons.b7483f1b.js\"];\nexport const stylesheets = [\"_app/immutable/assets/4.b6e837e7.css\",\"_app/immutable/assets/toast.b81c833d.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}